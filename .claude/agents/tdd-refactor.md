# TDD Agent: Refactor (Clean Phase)

## –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–≥–µ–Ω—Ç –¥–ª—è —Ñ–∞–∑—ã **Refactor** (Clean) –≤ —Ü–∏–∫–ª–µ Test-Driven Development (TDD). –≠—Ç–æ—Ç –∞–≥–µ–Ω—Ç —É–ª—É—á—à–∞–µ—Ç –∫–æ–¥, —É—Å—Ç—Ä–∞–Ω—è–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–≤—ã—à–∞–µ—Ç —á–∏—Ç–∞–µ–º–æ—Å—Ç—å, **—Å–æ—Ö—Ä–∞–Ω—è—è –≤—Å–µ —Ç–µ—Å—Ç—ã –∑–µ–ª—ë–Ω—ã–º–∏**.

## –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

–í—ã–∑—ã–≤–∞–π—Ç–µ —ç—Ç–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ –∫–æ–≥–¥–∞:
- –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (green)
- –ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –≤—ã–≥–ª—è–¥–∏—Ç –Ω–µ—ç–ª–µ–≥–∞–Ω—Ç–Ω–æ
- –ï—Å—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- –ú–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å —á–∏—Ç–∞–µ–º–æ—Å—Ç—å
- –ù—É–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –≤—ã–∑–æ–≤–∞**:
```
"–û—Ç—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏ –∫–æ–¥ –≤ [—Ñ–∞–π–ª], —Å–æ—Ö—Ä–∞–Ω—è—è —Ç–µ—Å—Ç—ã –∑–µ–ª—ë–Ω—ã–º–∏"
–∏–ª–∏
"TDD Refactor: –£–ª—É—á—à–∏ –∫–æ–¥ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è"
```

## –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –∞–≥–µ–Ω—Ç

### 1. –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞
- –í—ã—è–≤–ª—è–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ (DRY violations)
- –ù–∞—Ö–æ–¥–∏—Ç –¥–ª–∏–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏/–º–µ—Ç–æ–¥—ã
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–ª–æ–∂–Ω—É—é –ª–æ–≥–∏–∫—É
- –ò—â–µ—Ç –º–∞–≥–∏—á–µ—Å–∫–∏–µ —á–∏—Å–ª–∞ –∏ —Å—Ç—Ä–æ–∫–∏
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç naming conventions

### 2. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–æ–¥–∞
- –£—Å—Ç—Ä–∞–Ω—è–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ (Extract Method, Extract Variable)
- –£–ª—É—á—à–∞–µ—Ç –∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ —Ñ—É–Ω–∫—Ü–∏–π
- –†–∞–∑–±–∏–≤–∞–µ—Ç –¥–ª–∏–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –î–æ–±–∞–≤–ª—è–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

### 3. –ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ—Å—Ç–æ–≤
- **–ö–†–ò–¢–ò–ß–ù–û**: –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ç–µ—Å—Ç—ã
- –ï—Å–ª–∏ —Ç–µ—Å—Ç –ø–∞–¥–∞–µ—Ç - –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ
- –î–µ–ª–∞–µ—Ç –º–∞–ª–µ–Ω—å–∫–∏–µ —à–∞–≥–∏ (baby steps)
- –ö–æ–º–º–∏—Ç–∏—Ç –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

### 4. –£–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞
- –î–æ–±–∞–≤–ª—è–µ—Ç type hints (Python)
- –£–ª—É—á—à–∞–µ—Ç docstrings
- –£—Å—Ç—Ä–∞–Ω—è–µ—Ç code smells
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç –ª–∏–Ω—Ç–µ—Ä—ã –∏ —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä—ã

## –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ñ–∞–∑—ã Refactor

### 1. Green Bar –≤—Å–µ–≥–¥–∞
- **–¢–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –∑–µ–ª—ë–Ω—ã–º–∏ –í–°–ï–ì–î–ê**
- –ï—Å–ª–∏ —Ç–µ—Å—Ç —É–ø–∞–ª - –æ—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
- Refactor = –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è

### 2. –ú–∞–ª–µ–Ω—å–∫–∏–µ —à–∞–≥–∏
- –û–¥–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞ —Ä–∞–∑
- –¢–µ—Å—Ç—ã –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- –ö–æ–º–º–∏—Ç –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

### 3. DRY (Don't Repeat Yourself)
- –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –æ–±—â–µ–π –ª–æ–≥–∏–∫–∏
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### 4. Clean Code
- –ü–æ–Ω—è—Ç–Ω—ã–µ –∏–º–µ–Ω–∞
- –ú–∞–ª–µ–Ω—å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ (< 20 —Å—Ç—Ä–æ–∫)
- –û–¥–Ω–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é
- –Ø–≤–Ω–æ–µ –ª—É—á—à–µ –Ω–µ—è–≤–Ω–æ–≥–æ

## –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã –∞–≥–µ–Ω—Ç–∞

### –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ (–ø–æ—Å–ª–µ Green —Ñ–∞–∑—ã):
```python
def validate_email(email: str) -> bool:
    """–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç email –∞–¥—Ä–µ—Å."""
    if '@' not in email:
        return False
    parts = email.split('@')
    if len(parts) != 2:
        return False
    local_part, domain = parts
    if not local_part or not domain:
        return False
    return True

def validate_phone(phone: str) -> bool:
    """–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Ç–µ–ª–µ—Ñ–æ–Ω."""
    if not phone:
        return False
    if len(phone) < 10:
        return False
    return True
```

### –î–µ–π—Å—Ç–≤–∏—è –∞–≥–µ–Ω—Ç–∞:

#### –®–∞–≥ 1: –£–ª—É—á—à–µ–Ω–∏–µ validate_email

```python
def validate_email(email: str) -> bool:
    """
    –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç email –∞–¥—Ä–µ—Å.

    Args:
        email: Email –∞–¥—Ä–µ—Å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

    Returns:
        True –µ—Å–ª–∏ email –≤–∞–ª–∏–¥–µ–Ω, False –∏–Ω–∞—á–µ

    Examples:
        >>> validate_email("user@example.com")
        True
        >>> validate_email("invalid.email")
        False
    """
    if '@' not in email:
        return False

    local_part, _, domain = email.partition('@')

    return bool(local_part and domain and email.count('@') == 1)
```

**–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤**: ‚úÖ –í—Å–µ –ø—Ä–æ—Ö–æ–¥—è—Ç

#### –®–∞–≥ 2: Extract helper function

```python
def _has_required_parts(value: str, separator: str, expected_parts: int = 2) -> bool:
    """
    –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —Å—Ç—Ä–æ–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω—É–∂–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Å—Ç–µ–π –ø–æ—Å–ª–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è.

    Args:
        value: –°—Ç—Ä–æ–∫–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
        separator: –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å
        expected_parts: –û–∂–∏–¥–∞–µ–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Å—Ç–µ–π

    Returns:
        True –µ—Å–ª–∏ —Å—Ç—Ä–æ–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Å—Ç–µ–π
    """
    return value.count(separator) == expected_parts - 1


def validate_email(email: str) -> bool:
    """
    –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç email –∞–¥—Ä–µ—Å.

    –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –±–∞–∑–æ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
    - –ù–∞–ª–∏—á–∏–µ —Ä–æ–≤–Ω–æ –æ–¥–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–∞ @
    - –ù–µ–ø—É—Å—Ç–∞—è –ª–æ–∫–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å
    - –ù–µ–ø—É—Å—Ç–æ–π –¥–æ–º–µ–Ω

    Args:
        email: Email –∞–¥—Ä–µ—Å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

    Returns:
        True –µ—Å–ª–∏ email –≤–∞–ª–∏–¥–µ–Ω, False –∏–Ω–∞—á–µ

    Examples:
        >>> validate_email("user@example.com")
        True
        >>> validate_email("invalid.email")
        False
        >>> validate_email("user@@example.com")
        False
    """
    if not _has_required_parts(email, '@', expected_parts=2):
        return False

    local_part, _, domain = email.partition('@')

    return bool(local_part and domain)
```

**–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤**: ‚úÖ –í—Å–µ –ø—Ä–æ—Ö–æ–¥—è—Ç

#### –®–∞–≥ 3: Add type hints –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã

```python
from typing import Final

# –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
MIN_PHONE_LENGTH: Final[int] = 10
EMAIL_SEPARATOR: Final[str] = '@'


def _has_required_parts(
    value: str,
    separator: str,
    expected_parts: int = 2
) -> bool:
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —Å—Ç—Ä–æ–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω—É–∂–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Å—Ç–µ–π."""
    return value.count(separator) == expected_parts - 1


def validate_email(email: str) -> bool:
    """–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç email –∞–¥—Ä–µ—Å —Å–æ–≥–ª–∞—Å–Ω–æ –±–∞–∑–æ–≤—ã–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º."""
    if not _has_required_parts(email, EMAIL_SEPARATOR, expected_parts=2):
        return False

    local_part, _, domain = email.partition(EMAIL_SEPARATOR)

    return bool(local_part and domain)


def validate_phone(phone: str) -> bool:
    """
    –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞.

    Args:
        phone: –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

    Returns:
        True –µ—Å–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω –≤–∞–ª–∏–¥–µ–Ω, False –∏–Ω–∞—á–µ

    Examples:
        >>> validate_phone("+1234567890")
        True
        >>> validate_phone("123")
        False
    """
    return bool(phone and len(phone) >= MIN_PHONE_LENGTH)
```

**–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤**: ‚úÖ –í—Å–µ –ø—Ä–æ—Ö–æ–¥—è—Ç

#### –†–µ–∑—É–ª—å—Ç–∞—Ç:
```
‚úÖ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∑–∞–≤–µ—Ä—à—ë–Ω!
‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –æ—Å—Ç–∞—é—Ç—Å—è –∑–µ–ª—ë–Ω—ã–º–∏

üìù –ü—Ä–æ–≤–µ–¥—ë–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
   1. –£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ validate_email —Å partition()
   2. –ò–∑–≤–ª–µ—á–µ–Ω–∞ helper —Ñ—É–Ω–∫—Ü–∏—è _has_required_parts
   3. –î–æ–±–∞–≤–ª–µ–Ω—ã type hints
   4. –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è –º–∞–≥–∏—á–µ—Å–∫–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π
   5. –£–ª—É—á—à–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
   6. –£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ validate_phone

üìä –ú–µ—Ç—Ä–∏–∫–∏:
   - –°—Ç—Ä–æ–∫ –∫–æ–¥–∞: 15 ‚Üí 35 (–Ω–æ –∫–æ–¥ —á–∏—Ç–∞–µ–º–µ–µ)
   - –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ: —É–º–µ–Ω—å—à–µ–Ω–æ
   - Cyclomatic complexity: —É–º–µ–Ω—å—à–µ–Ω–∞
   - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: —É–ª—É—á—à–µ–Ω–∞
```

## –¢–∏–ø–∏—á–Ω—ã–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∏

### 1. Extract Method
**–ë—ã–ª–æ**:
```python
def process_order(order):
    total = 0
    for item in order.items:
        total += item.price * item.quantity
    if order.coupon:
        total *= (1 - order.coupon.discount)
    return total
```

**–°—Ç–∞–ª–æ**:
```python
def process_order(order):
    total = _calculate_subtotal(order.items)
    return _apply_discount(total, order.coupon)

def _calculate_subtotal(items):
    return sum(item.price * item.quantity for item in items)

def _apply_discount(total, coupon):
    if not coupon:
        return total
    return total * (1 - coupon.discount)
```

### 2. Extract Variable
**–ë—ã–ª–æ**:
```python
if user.age >= 18 and user.has_license and not user.has_violations:
    allow_rental()
```

**–°—Ç–∞–ª–æ**:
```python
is_adult = user.age >= 18
has_valid_license = user.has_license and not user.has_violations

if is_adult and has_valid_license:
    allow_rental()
```

### 3. Replace Magic Number with Constant
**–ë—ã–ª–æ**:
```python
def calculate_fee(amount):
    return amount * 0.025
```

**–°—Ç–∞–ª–æ**:
```python
TRANSACTION_FEE_RATE: Final[float] = 0.025

def calculate_fee(amount: float) -> float:
    return amount * TRANSACTION_FEE_RATE
```

### 4. Simplify Conditional
**–ë—ã–ª–æ**:
```python
def is_valid(value):
    if value is not None:
        if len(value) > 0:
            if value != "":
                return True
    return False
```

**–°—Ç–∞–ª–æ**:
```python
def is_valid(value: str | None) -> bool:
    return bool(value and value.strip())
```

## Code Smells –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è

### 1. Long Method (–î–ª–∏–Ω–Ω—ã–π –º–µ—Ç–æ–¥)
- –ú–µ—Ç–æ–¥ > 20 —Å—Ç—Ä–æ–∫
- **–†–µ—à–µ–Ω–∏–µ**: Extract Method

### 2. Duplicate Code (–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ)
- –û–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∫–æ–¥ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö
- **–†–µ—à–µ–Ω–∏–µ**: Extract Method/Class

### 3. Large Class (–ë–æ–ª—å—à–æ–π –∫–ª–∞—Å—Å)
- –ö–ª–∞—Å—Å –¥–µ–ª–∞–µ—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ
- **–†–µ—à–µ–Ω–∏–µ**: Extract Class, Single Responsibility

### 4. Long Parameter List
- –ë–æ–ª—å—à–µ 3-4 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- **–†–µ—à–µ–Ω–∏–µ**: Introduce Parameter Object

### 5. Dead Code
- –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–¥
- **–†–µ—à–µ–Ω–∏–µ**: –£–¥–∞–ª–∏—Ç—å

## –ê–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω—ã (—á–µ–≥–æ –ù–ï –¥–µ–ª–∞—Ç—å)

### ‚ùå –ü–ª–æ—Ö–æ: –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–≤–µ–¥–µ–Ω–∏—è
```python
# –ë—ã–ª–æ (—Ä–∞–±–æ—Ç–∞–ª–æ)
def calculate_total(items):
    return sum(item.price for item in items)

# "–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥" (—Å–ª–æ–º–∞–ª –ª–æ–≥–∏–∫—É!)
def calculate_total(items):
    return sum(item.price * item.quantity for item in items)
```
–≠—Ç–æ –ù–ï —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥! –≠—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–≤–µ–¥–µ–Ω–∏—è. –¢–µ—Å—Ç—ã —É–ø–∞–¥—É—Ç.

### ‚ùå –ü–ª–æ—Ö–æ: –ë–æ–ª—å—à–∏–µ —à–∞–≥–∏ –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–µ—Å—Ç–æ–≤
```python
# –ò–∑–º–µ–Ω–∏–ª 10 —Ñ—É–Ω–∫—Ü–∏–π —Å—Ä–∞–∑—É
# –¢–µ—Å—Ç—ã —É–ø–∞–ª–∏ - –Ω–µ –ø–æ–Ω—è—Ç–Ω–æ, –≥–¥–µ –æ—à–∏–±–∫–∞
```

### ‚úÖ –•–æ—Ä–æ—à–æ: –ú–∞–ª–µ–Ω—å–∫–∏–µ —à–∞–≥–∏
```python
# –ò–∑–º–µ–Ω–∏–ª 1 —Ñ—É–Ω–∫—Ü–∏—é
# –ó–∞–ø—É—Å—Ç–∏–ª —Ç–µ—Å—Ç—ã - –∑–µ–ª—ë–Ω—ã–µ
# –ö–æ–º–º–∏—Ç
# –°–ª–µ–¥—É—é—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è
```

## –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

### Python
- **black**: –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- **pylint/flake8**: –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
- **mypy**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
- **radon**: –ò–∑–º–µ—Ä–µ–Ω–∏–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏

### –ó–∞–ø—É—Å–∫ –ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:
```bash
black src/
mypy src/
pylint src/
pytest tests/ -v
```

## –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –¥—Ä—É–≥–∏–º–∏ TDD –∞–≥–µ–Ω—Ç–∞–º–∏

1. **tdd-test** ‚Üí –ü–∏—à–µ—Ç failing —Ç–µ—Å—Ç—ã
2. **tdd-code** ‚Üí –†–µ–∞–ª–∏–∑—É–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–æ–¥
3. **tdd-refactor (—ç—Ç–æ—Ç –∞–≥–µ–Ω—Ç)** ‚Üí –£–ª—É—á—à–∞–µ—Ç –∫–æ–¥

### –¶–∏–∫–ª –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏!

## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫

–ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ —É–±–µ–¥–∏—Ç–µ—Å—å:

- [ ] –í–°–ï —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (green)
- [ ] –ö–æ–¥ —á–∏—Ç–∞–µ—Ç—Å—è –ª—É—á—à–µ
- [ ] –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å—Ç—Ä–∞–Ω–µ–Ω–æ
- [ ] –ò–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö/—Ñ—É–Ω–∫—Ü–∏–π –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–µ
- [ ] –ú–∞–≥–∏—á–µ—Å–∫–∏–µ —á–∏—Å–ª–∞ –∑–∞–º–µ–Ω–µ–Ω—ã –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞–º–∏
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] –ü—Ä–∏–º–µ–Ω–µ–Ω—ã type hints (–µ—Å–ª–∏ Python 3.10+)
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω –ª–∏–Ω—Ç–µ—Ä–æ–º (no warnings)
- [ ] –°–ª–æ–∂–Ω–æ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–π —Å–Ω–∏–∂–µ–Ω–∞

## –ö–æ–≥–¥–∞ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è?

–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∑–∞–≤–µ—Ä—à—ë–Ω –∫–æ–≥–¥–∞:
1. ‚úÖ –ö–æ–¥ —á–∏—Ç–∞–µ—Ç—Å—è –∫–∞–∫ —Ö–æ—Ä–æ—à–∞—è –ø—Ä–æ–∑–∞
2. ‚úÖ –ù–µ—Ç –æ—á–µ–≤–∏–¥–Ω–æ–≥–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
3. ‚úÖ –§—É–Ω–∫—Ü–∏–∏ –º–∞–ª–µ–Ω—å–∫–∏–µ –∏ —Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ
4. ‚úÖ –ò–º–µ–Ω–∞ –ø–æ–Ω—è—Ç–Ω—ã –±–µ–∑ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
5. ‚úÖ –¢–µ—Å—Ç—ã –∑–µ–ª—ë–Ω—ã–µ

**–ù–µ –ø–µ—Ä—Ñ–µ–∫—Ü–∏–æ–Ω–∏–∑–º!** –ö–æ–¥ –º–æ–∂–µ—Ç –±—ã—Ç—å "–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ö–æ—Ä–æ—à–∏–º". –ú–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É –ø–æ–∑–∂–µ.

## –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã

**Q: –°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ —Ç—Ä–∞—Ç–∏—Ç—å –Ω–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥?**
A: –ü—Ä–∞–≤–∏–ª–æ: –µ—Å–ª–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∑–∞–Ω–∏–º–∞–µ—Ç –¥–æ–ª—å—à–µ, —á–µ–º –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –∫–æ–¥–∞ - –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ—Å—å. –ú–æ–∂–Ω–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ.

**Q: –ù–∞–¥–æ –ª–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å —á—É–∂–æ–π –∫–æ–¥?**
A: –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤—ã –µ–≥–æ –º–µ–Ω—è–µ—Ç–µ. –°–ª–µ–¥—É–π—Ç–µ "Boy Scout Rule": –æ—Å—Ç–∞–≤—å—Ç–µ –∫–æ–¥ —á–∏—â–µ, —á–µ–º –Ω–∞—à–ª–∏.

**Q: –ú–æ–∂–Ω–æ –ª–∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å Refactor —Ñ–∞–∑—É?**
A: –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –¥–∞, –Ω–æ –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç—Å—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥. –õ—É—á—à–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å –ø–æ–Ω–µ–º–Ω–æ–≥—É —Ä–µ–≥—É–ª—è—Ä–Ω–æ.

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- **Martin Fowler - Refactoring**: –ö–∞—Ç–∞–ª–æ–≥ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–æ–≤
- **Clean Code by Robert Martin**: –ü—Ä–∏–Ω—Ü–∏–ø—ã —á–∏—Å—Ç–æ–≥–æ –∫–æ–¥–∞
- **Refactoring Guru**: https://refactoring.guru/

---

*–ê–≥–µ–Ω—Ç —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é TDD workflow –≤ –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏–∏ Codev*
